<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
	<title> Test </title>
	<link rel="stylesheet" type="text/css" href="style.css">
<script src="3a.js"></script>
</head>
<body id="body">


	<div id="counter"> </div>
<center> <h1> FRITIDS </h1> </center>
	



	<div id="paintchart"> 
		<div id="bla" class="farg"> HANDBOLL </div>	
		<div id="orange" class="farg"> FOTBOLL </div>	
		<div id="gron" class="farg"> FLÖJT </div>	
		<div id="lila" class="farg"> PYSSEL </div>	
	</div>


<div id="divtreA" class="klassdiv"> <center><b>KLASS 3C</b></center> </div>



<script> 

var count = 0;														//Initiera variabel för elevräknare	
var counterdiv = document.getElementById("counter");   
var allcount = 0;

function active(elever, klass) {

	elever.forEach(function(obj){

		addTime(obj)												// Lägg till tid för varje elev-objekt		
			
		if (typeof obj.tid !== "object") {    
				allcount +=1;
                      // Om man man avbryter prompten blr tid = null, typeOf null = object.
			count += 1;												// För varje elev som är aktiv, elevräknaren plusas med ett		
			var div = document.createElement("div");				//Skapa div						
			div.innerHTML = obj.namn+"<br>"+obj.tid;				//Mata info till div
			klass.appendChild(div);									// Append till objektets klassdiv
			counterdiv.innerHTML = count+"/"+allcount;


																																		
			div.addEventListener("click", function() {				//Div click-funktion

				if (f == "") {										//OM man inte valt färg uR färgchart, då är det gå hem eller början om. 
					if(this.style.backgroundColor == "red") {
						addTime(obj);								// Om man klickar på en röd div så lägger vi ny tid på objektet. 
						count +=1;									// Om elev läggs in igen, elevräknare plusar 1.
						counterdiv.innerHTML = count;				// Mata div med nytt antal elever		
						div.innerHTML = obj.namn+"<br>"+obj.tid;	
						klass.appendChild(div)						// Mata div till klassdiv med ny tidinfo
						this.style.backgroundColor = "white";
					} 
					else {
						if(this.style.backgroundColor == "red" || this.style.backgroundColor == "blue" || this.style.backgroundColor == "orange" || this.style.backgroundColor == "green" || this.style.backgroundColor == "purple") { 
						this.style.backgroundColor = "white";			// Om färg är valt ut färgchart, färga följande div med samma färg och återställ (f)-färgvariabeln.		
						}
						else {
							this.style.backgroundColor = "red";

							count -= 1;                                             // om elev går hem, räknar minskas med ett
							counterdiv.innerHTML = count+"/"+allcount;						// Mata div med nytt antal elever
							var now = new Date();

							var hours = now.getHours();									// Tidsstämpel för när elev blev hemskickad
							var minutes = now.getMinutes();
							div.innerHTML = obj.namn+"<br>"+hours+":"+minutes;
							klass.appendChild(div)						// Om diven får färgen röd, appenda den igen och den hamnar längt bak.
						}
					}
				}
				else {
					this.style.backgroundColor = f;
					f = "";

				}
			})
		}
	})
}

active(treA, divtreA)



																		//Lägg till tid för varje elev 
function addTime(obj) {
	var x = prompt("När ska "+obj.namn+" "+obj.efternamn+" hem?")     // När ska objektet hem?
	obj.tid = x;														// mata in tid till objekt	
}
																			
var bla = document.getElementById("bla");
var orange = document.getElementById("orange");
var gron = document.getElementById("gron");
var lila = document.getElementById("lila");
bla.style.backgroundColor = "blue";
orange.style.backgroundColor = "orange";
gron.style.backgroundColor = "green";						// PAINTCHART
lila.style.backgroundColor = "purple";

var f = "";														// Variabel som håller färg mellan klicken	
bla.addEventListener("click", function () {
	f = this.style.backgroundColor;
})
orange.addEventListener("click", function () {
	f = this.style.backgroundColor;
})
gron.addEventListener("click", function () {
	f = this.style.backgroundColor;
})
lila.addEventListener("click", function () {
	f = this.style.backgroundColor;
})



</script>



</body>
</html>

